<h1>RTI Requests</h1>

<form method="get">

    <!-- ðŸ” Search -->
    <input type="text" name="q" placeholder="Search..." value="{{ query }}">

    <!-- ðŸ› Panchayat Filter -->
    <select name="panchayat">
        <option value="">All Panchayats</option>
        {% for p in panchayats %}
            <option value="{{ p.id }}"
                {% if p.id|stringformat:"s" == selected_panchayat %}selected{% endif %}>
                {{ p.name }}
            </option>
        {% endfor %}
    </select>

    <!-- ðŸ“Š Status Filter -->
    <select name="status">
        <option value="">All Status</option>
        <option value="COMPLETE" {% if selected_status == "COMPLETE" %}selected{% endif %}>Complete</option>
        <option value="VAGUE" {% if selected_status == "VAGUE" %}selected{% endif %}>Vague</option>
        <option value="DENIED" {% if selected_status == "DENIED" %}selected{% endif %}>Denied</option>
        <option value="DELAYED" {% if selected_status == "DELAYED" %}selected{% endif %}>Delayed</option>
    </select>

    <button type="submit">Apply</button>
</form>

<br>
<a href="/create/">Create New RTI</a>
<hr>

{% for rti in rti_requests %}
    <div>
        <h3>{{ rti.reference_number }}</h3>
        <p><strong>Applicant:</strong> {{ rti.applicant_name }}</p>
        <p><strong>Date Filed:</strong> {{ rti.date_filed }}</p>
        <p><strong>Panchayat:</strong> {{ rti.panchayat.name }}</p>
        <a href="/{{ rti.id }}/">View Details</a>
        <hr>
    </div>
{% empty %}
    <p>No RTI requests yet.</p>
{% endfor %}
